

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Decision Trees &mdash; AutoProf 0.8 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extra Methods" href="extramethods.html" />
    <link rel="prev" title="AutoProf Pipeline Control" href="pipelinemanipulation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> AutoProf
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citing AutoProf</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">GNU GENERAL PUBLIC LICENSE</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="psf.html">PSF</a></li>
<li class="toctree-l1"><a class="reference internal" href="center.html">Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="isophoteinit.html">Isophote Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="isophotefit.html">Fitting Elliptical Isophotes</a></li>
<li class="toctree-l1"><a class="reference internal" href="isophoteextracting.html">SB Profile Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkingfits.html">Fit Success Checks</a></li>
<li class="toctree-l1"><a class="reference internal" href="writeprofile.html">Writing The Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelinemanipulation.html">AutoProf Pipeline Control</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Decision Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="extramethods.html">Extra Methods</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AutoProf</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Decision Trees</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/decisiontrees.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="decision-trees">
<h1>Decision Trees<a class="headerlink" href="#decision-trees" title="Permalink to this headline">¶</a></h1>
<p>AutoProf at its core is a pipeline building code, as such it has a more advanced feature for constructing complex pipelines: decision trees.
In a decision tree pipeline, one can essentially construct a flow chart of decisions and corresponding methods to run and options to use.
The beginning of the tree is always <em>‘head’</em> and AutoProf will continue to read those steps until it reaches a step containing the word <em>branch</em> (any other text can be included in the step name so you can write many different branches).
At a branch step, AutoProf will provide the usual inputs, but the output should be a string or <em>None</em> and a dictionary of new options (if any).
If <em>None</em> is returned then AutoProf carries on along the same branch it is already on.
If a string is returned, then that is taken as the key from which to check for the next step in the pipeline steps object.
An empty dictionary can be used to change no options.
When switching branches, AutoProf will start at the beginning of the new branch.
Note, the new branch can even be the branch you started on so watch out for infinite loops!</p>
<p>For example, in a large sample, one may wish to process edge-on galaxies differently than the others, but it may not be clear which galaxies fit the edge-on criteria until the photometry is done.
In this example, one could have AutoProf perform photometry up to the point of the <em>isophoteinit</em> step, then the rest of the functions could be chosen based on the ellipticity of the initialized ellipse.
To make this work one could add:
.. code-block:: python</p>
<blockquote>
<div><dl>
<dt>def My_Edgeon_Fit_Method(IMG, results, options):</dt><dd><p>N = 100
return IMG, {‘fit ellip’: np.array([results[‘init ellip’]]*N), ‘fit pa’: np.array([results[‘init pa’]]*N),</p>
<blockquote>
<div><p>‘fit ellip_err’: np.array([0.05]*N), ‘fit pa_err’: np.array([5*np.pi/180]*N),
‘fit R’: np.logspace(0,np.log10(results[‘init R’]*2),N)}</p>
</div></blockquote>
</dd>
<dt>ap_new_pipeline_methods = {‘branch edgeon’: lambda IMG,results,options: (‘edgeon’ if results[‘init ellip’] &gt; 0.8 else ‘standard’, {}),</dt><dd><p>‘edgeonfit’: My_Edgeon_Fit_Method}</p>
</dd>
<dt>ap_new_pipeline_steps = {‘head’: [‘background’, ‘psf’, ‘center’, ‘isophoteinit’, ‘branch edgeon’],</dt><dd><p>‘standard’: [‘isophotefit’, ‘isophoteextract’, ‘checkfit’, ‘writeprof’],
‘edgeon’: [‘edgeonfit’, ‘isophoteextract’, ‘writeprof’, ‘axialprofiles’, ‘radialprofiles’]}</p>
</dd>
</dl>
</div></blockquote>
<p>in the config file. This config file would apply a standard pipeline for face-on or moderately inclined galaxies, but a special pipeline for edge-on galaxies which includes a user defined fitting function <em>My_Edgeon_Fit_Method</em>, axial profiles, and radial profiles. This example is included in the test folder as the <em>test_tree_config.py</em> example config file.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="extramethods.html" class="btn btn-neutral float-right" title="Extra Methods" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="pipelinemanipulation.html" class="btn btn-neutral float-left" title="AutoProf Pipeline Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Connor Stone.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>